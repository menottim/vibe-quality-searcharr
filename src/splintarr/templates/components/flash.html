{#
Flash message component

Usage:
    {% include "components/flash.html" %}

Expected variables:
    - error: Error message (optional)
    - success: Success message (optional)
    - warning: Warning message (optional)
    - info: Info message (optional)
#}

{% if error %}
<div class="container" id="flash-message">
    <article style="background-color: var(--del-color); border-color: var(--del-color);">
        <a href="#" aria-label="Close" class="close" data-action="dismiss-flash"></a>
        <strong>Error:</strong> {{ error }}
    </article>
</div>
{% endif %}

{% if success %}
<div class="container" id="flash-message">
    <article style="background-color: var(--ins-color); border-color: var(--ins-color);">
        <a href="#" aria-label="Close" class="close" data-action="dismiss-flash"></a>
        <strong>Success:</strong> {{ success }}
    </article>
</div>
{% endif %}

{% if warning %}
<div class="container" id="flash-message">
    <article style="background-color: #f39c12; border-color: #f39c12;">
        <a href="#" aria-label="Close" class="close" data-action="dismiss-flash"></a>
        <strong>Warning:</strong> {{ warning }}
    </article>
</div>
{% endif %}

{% if info %}
<div class="container" id="flash-message">
    <article style="background-color: var(--primary); border-color: var(--primary);">
        <a href="#" aria-label="Close" class="close" data-action="dismiss-flash"></a>
        <strong>Info:</strong> {{ info }}
    </article>
</div>
{% endif %}

<script nonce="{{ request.state.csp_nonce }}">
document.addEventListener('click', function(e) {
    if (e.target.closest('[data-action="dismiss-flash"]')) {
        e.preventDefault();
        e.target.closest('[data-action="dismiss-flash"]').parentElement.parentElement.remove();
    }
});

// Auto-dismiss flash messages after 5 seconds
document.addEventListener('DOMContentLoaded', () => {
    const flashMessage = document.getElementById('flash-message');
    if (flashMessage) {
        setTimeout(() => {
            flashMessage.style.transition = 'opacity 0.5s';
            flashMessage.style.opacity = '0';
            setTimeout(() => flashMessage.remove(), 500);
        }, 5000);
    }
});
</script>
